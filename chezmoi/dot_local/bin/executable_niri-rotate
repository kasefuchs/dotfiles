#!/bin/bash
set -euo pipefail

output_name=${1:-$(niri msg -j focused-output | jq -r .name)}
current_rotation=$(niri msg -j outputs | jq -r --arg name "$output_name" '.[$name].logical.transform')

declare -A rotation_map=(["Normal"]="90" ["90"]="180" ["180"]="270" ["270"]="normal")

niri msg output $output_name transform ${rotation_map[$current_rotation]}
